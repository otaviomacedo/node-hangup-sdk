let totalCount = Number(process.env.BREAKER ?? '1') || 1;
const initialCount = totalCount;

let i = 1;

module.exports = function() {
  totalCount--;
  const stopping = totalCount <= 0;

  console.log([
    '-----------------------------------------------------------',
    `BREAKPOINT ${i}. Stopping: ${stopping}`,
  ].join('\n'));
  if (stopping) {
    throw new Error(`Stopped by the breaker after ${initialCount} breaks`);
  }
};